networks:
- name: prometheus1
  type: dynamic
  subnets:
  - range: (( grab terraform_outputs.staging_monitoring_subnet_cidr ))
    gateway: (( grab terraform_outputs.staging_monitoring_subnet_gateway ))
    dns:
    - (( grab terraform_outputs.tooling_bosh_static_ip ))
    - (( grab terraform_outputs.vpc_cidr_dns ))
    cloud_properties:
      subnet: (( grab terraform_outputs.staging_monitoring_subnet ))
      security_groups:
      - (( grab terraform_outputs.staging_monitoring_security_group ))
      - (( grab terraform_outputs.bosh_security_group ))

resource_pools:
- name: small_z1
  cloud_properties:
    instance_type: m3.medium
    availability_zone: (( grab terraform_outputs.staging_monitoring_az ))

- name: small_z1_public
  cloud_properties:
    instance_type: m3.medium
    availability_zone: (( grab terraform_outputs.staging_monitoring_az ))
    elbs:
    - (( grab terraform_outputs.staging_prometheus_elb_name ))

compilation:
  cloud_properties:
    availability_zone: (( grab terraform_outputs.staging_monitoring_az ))

properties:
  bosh_exporter:
    metrics:
      environment: staging
  firehose_exporter:
    metrics:
      environment: staging
